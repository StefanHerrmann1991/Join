<head>
    <!-- script data -->
    <script src="../../includeHTML.js"></script>
    <script src="../../mini_backend.js" defer></script>
    <script src="../../script.js"></script>
    <script src="contacts.js"></script>
    <!-- css data -->
    <link rel="stylesheet" href="contacts.css">
    <link rel="stylesheet" href="../../styles.css">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Join</title>
</head>

<body onload="initContacts()">
    <div w3-include-html="../../index.html"></div>
    <div class="main-container">
        <div class="contact-flex">
            <div id="contactBookId" class="contact-book"></div>
        </div>
        <div class="edit-contact-container">
            <div class="edit-contact-menu">

                <div class="edit-contact-headline">
                    <h2>Contacts</h2>
                    <nobr>Better with a Team</nobr>
                </div>
                <div class="edit-contact-popup" id="editContact"></div>
            </div>
        </div>
    </div>
    <button class="add-contact-btn" onclick="openContainer('addContactDialog')">New Contact<img
            src="/assets/img/addContact.png"></button>
    <div class="add-contact-dialog d-none" id="addContactDialog">
       
        <div class="add-contact" id="addContact">
            <div class="add-contact-menu">
                <div class="add-contact-description">
                    <img src="/assets/img/logo.png">
                    <h2>Add contact</h2>
                    <p>Tasks are better with a team!</p>
                </div>
                <div class="add-contact-submenu">
                    <button class="close-upper-right" onclick="closeContainer('addContactDialog')">
                        <img src="/assets/img/cancel.png">
                    </button>
                    <img src="/assets/img/addContactBig.png">
                    <form onsubmit="createContact(event);  saveBackendDataOf(contactBook); renderContacts()"
                        id="contactFormfield">
                        <input type="text" id="name" name="name" required placeholder="Name">
                        <input type="email" id="email" name="email" required placeholder="Email">
                        <input type="tel" id="phone" name="phone" required placeholder="Phone">
                        <div class="menu-btn">
                            <button type="button" onclick="closeContainer('addContactDialog')">Cancel
                                <img src="/assets/img/cancel.png">
                            </button>
                            <button type=submit>
                                <nobr>Create contact</nobr>
                                <img src="/assets/img/check.png">
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="edit-contact-dialog d-none" id="editContactDialog"></div>
    <div class="add-task-popup d-none" id="addTaksPopup">
        <div class="task-main">
            <button class="close-upper-right" onclick="closeContainer('addTaksPopup')">
                <img src="/assets/img/cancel.png">
            </button>
            <div class="title-form">
                <h1>Add Task</h1>
                <form class="add-task-formfield" onsubmit="addToTasks();">
                    <div class="add-task-left">
                        <h3>Title</h3>
                        <input required class="title" id="title" placeholder="Enter a title" oninput="loadTasks()">
                        <h3>Description</h3>
                        <textarea resize="none" required id="description" placeholder="Enter a description"></textarea>
                        <h3>Category</h3>
                        <div class="assign-btn-container" id="categoryContainer">
                            <button type="button" class="assign-btn" onclick="toggleContainer('categoryMenu')">
                                <div class="chosen-category-container" id="categorySelect">Select task category</div>
                                <div id="imgArrow"><img src="/assets/img/open.png"></div>
                                <input id="validateCategory" required class="hidden-input">
                            </button>
                            <div class="user-menu d-none" id="categoryMenu">
                                <button id="newCategoryBtn" type="button" class="new-category-btn"
                                    onclick="newCategory()">New
                                    category</button>
                                <div class="category-list" id="categoryList"></div>
                            </div>
                        </div>
                        <h3>Assigned to</h3>
                        <div class="assign-btn-container" id="assignBtnContainer">
                            <button type="button" class="assign-btn" onclick="toggleContainer('userMenu')">
                                <div>Select contact to assign</div>
                                <div id="imgArrow"><img src="/assets/img/open.png"></div>
                                <input id="validateAssignment" required class="hidden-input">
                            </button>
                            <div class="user-menu d-none" id="userMenu">
                                <div class="user-list" id="userList"></div>
                                <button id="inviteUserBtn" type="button" class="invite-user-btn"
                                    onclick="inviteUsers()">Invite new contact<img
                                        src="/assets/img/contactsBlack.png"></button>
                            </div>
                        </div>
                        <div id="userInitialContainer" class="user-initial-container"></div>
                    </div>
                    <div class="add-task-right">
                        <h3>Due date</h3>
                        <input required id="date" class="date" type="date" name="setTodaysDate">
                        <h3>Prio</h3>
                        <div id="urgency" class="priority-btns">
                            <label for="urgent" class="urgent priority-btn">
                                <input type="radio" id="urgent" name="priority" value="urgent" class="priority-radio"
                                    required>
                                Urgent<img src="../../assets/img/prioUrgent.png">
                            </label>

                            <label for="medium" class="medium priority-btn">
                                <input type="radio" id="medium" name="priority" value="medium" class="priority-radio">
                                Medium<img class="medium-prio" src="../../assets/img/prioMedium.png">
                            </label>

                            <label for="low" class="low priority-btn">
                                <input type="radio" id="low" name="priority" value="low" class="priority-radio">
                                Low<img src="../../assets/img/prioLow.png">
                            </label>
                        </div>
                        <h3>Subtasks</h3>
                        <div class="assign-btn-container" id="subtasks">
                            <button onclick="renderSubtasks()" type="button" class="assign-btn" type="text">
                                <div id="subtaskMenu">Add new subtask</div><img class="add-subtask"
                                    src="/assets/img/addIcon.png">
                            </button>
                        </div>
                        <div id="renderedSubtasks"></div>
                        <div class="btn-container">
                            <button class="clear-btn" type="reset" class="clear-btn" onclick="clearAssignments()">
                                Clear<img src="/assets/img/cancel.png"></button>
                            <button class="create-task-btn" type="submit" class="assign-btn">
                                Create Task<img src="/assets/img/check.png"></button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</body>